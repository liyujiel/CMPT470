function loadView(e){var t="undefined"!=typeof e&&void 0!=e.use_backup_content?e.use_backup_content:!1,n="undefined"!=typeof e&&void 0!=e.app_el?e.app_el:$("#appView");for(var a in GLOBALS)window[a]=GLOBALS[a];var i=META.app_type+"AppModel";if(META.soft_alias&&(window[i]=window[META.app_namespace+"AppModel"]),APP_MODEL=new window[i],t)for(var a in BACKUP_CONTENT)"undefined"!=BACKUP_CONTENT[a]&&APP_MODEL.set(a,BACKUP_CONTENT[a]);else for(var a in CONTENT)"undefined"!=CONTENT[a]&&APP_MODEL.set(a,CONTENT[a]);APP_MODEL.meta={};for(var a in META)"undefined"!=META[a]&&(APP_MODEL.meta[a]=META[a]);APP_MODEL.afterMount(),META.password_protected_template&&$("body").append(META.password_protected_template),APP_VIEW=new window[META.app_namespace+"AppView"]({el:"#"+n.attr("id"),model:APP_MODEL}),$.inArray(META.external_id_type,["weebly-integrated","design-editor","webydo","bookmark","cloudflare"])>-1&&(debug()("Updating through local storage"),setInterval(function(){if("undefined"!=typeof META){var e=localStorage.getItem("powr_data_"+META.id);if(void 0!=e&&null!=e&&"null"!=e){e=JSON.parse(e);{APP_MODEL.get("locals")}for(var t in e.content)if("locals"==t)for(var n in e.content.locals)APP_MODEL.attributes.locals[n]=e.content.locals[n];else APP_MODEL.attributes[t]=e.content[t];"undefined"!=typeof PLATFORM_DATA&&loadPlatformData(PLATFORM_DATA,{render:!1}),APP_VIEW.render(),localStorage.removeItem("powr_data_"+META.id)}}},100)),loadViewInitializers()}function loadViewInitializers(){"free"==META.premium_status&&$(".loadingWrapper").show(),META.edit_me&&("jimdo"==META.external_id_type&&$("#editMe").css({marginTop:"20px"}),$("#editMe").fadeIn("fast")),$('link[rel="canonical"]').attr("href",baseUri()+"/plugins/view?id="+META.id),META.admin_debug_panel&&$("body").append(META.admin_debug_panel),"undefined"==typeof _gaq&&(_gaq=[]);var e="UA-46595223-1";_gaq.push(["powr._setAccount",e]),_gaq.push(["powr._trackPageview"]),analyticsEvent(META.id.toString(),"view",""),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();var t=getURLParameter("mode");"page"==t?($("html").css({overflow:"auto"}),$("#appView").css({margin:"5% 15%"})):$("html").css("scroll"==t?{overflow:"auto"}:{overflow:"hidden"})}function loadViewListeners(){function e(e){function t(){PARENT_ORIGIN=e.origin,IFRAME_INDEX=n.data.iframe_index,"undefined"==typeof APP_MODEL?setTimeout(t,50):APP_MODEL.setLocals({parent_origin:e.origin,iframe_index:n.data.iframe_index,parent_window_height:n.data.parent_window_height,parent_window_width:n.data.parent_window_width})}try{var n=JSON.parse(e.data)}catch(a){return debug()("Couldn't json parse data: ",a),!1}var n=JSON.parse(e.data);if("loaded"==n.message){debug()("View received settings loaded. Evt origin is ",e.origin),t();var i={message:"viewLoaded",data:{iframe_index:n.data.iframe_index}};parent.postMessage(JSON.stringify(i),e.origin),"undefined"!=typeof APP_VIEW&&APP_VIEW.postSizeToSocket()}if("loadView"==n.message)META=n.data.meta,GLOBALS=n.data.globals,CONTENT=n.data.content,loadView(),APP_MODEL.setLocals({parent_origin:e.origin,iframe_index:n.data.iframe_index});else if("showEdit"==n.message)$("#editMe, .adminAppInfo").fadeIn();else if("hideEdit"==n.message)$("#editMe, .adminAppInfo").hide();else if("update"==n.message){{APP_MODEL.get("locals")}for(var o in n.data.content)if("locals"==o)for(var r in n.data.content.locals)APP_MODEL.attributes.locals[r]=n.data.content.locals[r];else APP_MODEL.attributes[o]=n.data.content[o];APP_VIEW.render()}else"triggerPowrPopupClick"==n.message||"exitDocument"==n.message?APP_VIEW.openModal&&APP_VIEW.openModal(n.message):"platformData"==n.message&&(loadPlatformData(n.data),PLATFORM_DATA=n.data)}function t(){$("#editMe").popover({html:!0,trigger:"hover",delay:{hide:850},viewport:{selector:"#apps-view",padding:0},template:'<div class="popover" role="tooltip" style="font-size: 12px;margin-top: 5px;z-index: 10000000;"><div class="arrow"></div><div class="popover-content"></div></div>'})}try{APP_SOCKET=new easyXDM.Socket({onMessage:function(e){var t=JSON.parse(e);debug()("Message in app:",t),t.action&&"activate"==t.action?$("#editMe").fadeIn():t.action&&"deactivate"==t.action&&$("#editMe").fadeOut()}})}catch(n){debug()("Could not establish socket connection: "+n)}return window.addEventListener?window.addEventListener("message",e):window.attachEvent("onmessage",e),$(document).on("click","#editMe",function(){"undefined"!=typeof SETTINGS_WINDOW&&SETTINGS_WINDOW.close();var e=Math.round(.9*screen.height),t=400,n=Math.round(screen.width-t-.1*screen.width),a="/apps/"+META.app_type+"/settings?id="+META.true_id+"&demo_mode="+META.demo_mode;void 0!=META.template&&(a+="&template="+META.template),SETTINGS_WINDOW=window.open(a,"POWr Editor","width="+t+",height="+e+",top=-1000,left="+n+",location=no,status=no","false")}),void 0==$(window).popover?void setTimeout(function(){t()},2e3):(t(),void $(window).on("beforeunload",function(){return APP_MODEL.get("locals").isDirty?"You have unsaved work with a POWr Plugin! If you leave this page you will lose any unsaved changes.":void 0}))}function loadPlatformData(e,t){if(debug()("Trying to load platform data"),"undefined"==typeof APP_MODEL)return void setTimeout(function(){loadPlatformData(e)},100);"undefined"==typeof t&&(t={render:!0}),debug()("Loading platform data",e);var n=!1,a={};for(var i in e.content)"undefined"!=typeof APP_MODEL.defaults()[i]&&APP_MODEL.attributes[i]!=e.content[i]&&(debug()("Default key: "+APP_MODEL.defaults()[i]),debug()("Response key: "+e.content[i]),"px"==(APP_MODEL.defaults()[i]+"").slice(-2)&&"px"!=(e.content[i]+"").slice(-2)?(APP_MODEL.attributes[i]=e.content[i]+"px",a[i]=e.content[i]+"px"):(APP_MODEL.attributes[i]=e.content[i],a[i]=e.content[i]),n=!0);n&&t.render&&APP_VIEW.render()}function initializeWix(){"undefined"!=typeof WIX_LOCAL_APP_TYPE&&(wixLocalAppModel=window[WIX_LOCAL_APP_TYPE+"AppModel"],localDevAppModel=wixLocalAppModel,wixIeLocalAppModel=wixLocalAppModel),VIEW_MODE=Wix.Utils.getViewMode(),loadView("site"!=VIEW_MODE?{use_backup_content:!0}:{use_backup_content:!1}),Wix.addEventListener(Wix.Events.SETTINGS_UPDATED,function(e){debug()("Wix settings updated:",e),APP_MODEL.attributes=e,APP_MODEL.meta.saved=!0,APP_VIEW.render()}),Wix.addEventListener(Wix.Events.SITE_PUBLISHED,function(){debug()("site published"),APP_MODEL.doSave({post_params:{wix_published:!0}})}),Wix.addEventListener(Wix.Events.COMPONENT_DELETED,function(){debug()("app deleted"),APP_MODEL.doSave({post_params:{wix_deleted:!0}})}),"site"==VIEW_MODE&&Wix.currentMember(function(e){debug()("member details: ",e),e&&e.email&&setTimeout(function(){deliverHash(e.email)},2e3)})}function PowrEvents(){this._events={},this.on=function(e,t){return e in this._events?this._events[e].push(t):this._events[e]=[t],this},this.trigger=function(e){return e in this._events?this._events[e].forEach(function(t){t(this,e)}.bind(this)):console.warn("Unregistered event [ "+e+" ] called. For POWr Module: [ "+this.moduleName+" ]"),this},this.triggerFor=function(e,t){var n=function(n){t&&t.call(this,e,n),this.trigger(e)}.bind(this);return n}}function PowrHideShow(){this.show=this.show||function(){return this.$body.show(),this},this.hide=this.hide||function(){return this.$body.hide(),this}}function PowrRegister(e){$.extend(this,e);var t=[{_tag:"pwr-mod-attr",behavior:function(e,t){var n="$"+e;n in this?this.newElem=this[n].add(t):this[n]=t}},{_tag:"pwr-handler",behavior:function(e,t){var n=t.attr("pwr-handler-event");n&&n.length?n.split(",").forEach(function(n){t.on(n,this._exec_handler(e))}.bind(this)):t.on("click",this._exec_handler(e))}},{_tag:"pwr-event",behavior:function(e){this._events||PowrEvents.call(this),this.trigger(e)}}],n=function(e,n){t.forEach(function(t){var a=t.behavior,i=e.attr(t._tag);i&&a.call(n,i,e)})};return!this.$body&&this._html?this.$body=$(this._html):this.$body||(this.$body=$($("[pwr-mod-name="+this.ModuleName+"]").html())),this.$body.length?(this.length=this.$body.length,this.splice=this.$body.splice.bind(this.$body),this[0]=this.$body.get(0),this._exec_handler=this._exec_handler||function(e){var t=this;return function(n){t._handlers&&t._handlers[e](n,this,t)}}.bind(this),this.register=this.register||function(e){var t,a=this,i="[pwr]",o=e||this.$body;t=o.findAndSelf(i),t.each(function(){var e=$(this);n(e,a)})},this.register(),void(this.registerChild=function(){})):console.warn("Could not find template for POWr Module: [ "+this.ModuleName+" ]")}function PowrStrap(e){this.registeredModules=[PowrRegister,PowrEvents,PowrHideShow],this._register=function(e){this.registeredModules.push(e),this._make()},this._make=function(){this.registeredModules.forEach(function(t){t.call(this,e)}.bind(this))},this._make()}function POWrDropDown(e,t){PowrStrap.call(this,e),this.items=t,this.enabled=!0,this.initializerPicker()}function POWrDatePickerComponent(e){if(PowrStrap.call(this,e),this.formatString=this.formatString||"MM-DD-YYYY",this.using_native_inputs)return this.handleNativeInputs(e);if(this.$datePickerContainer.length){this.$datePickerContainer.datepicker({showOn:"focus",showButtonPanel:!0,dateFormat:"mm-dd-yy",onSelect:this._exec_handler("jqueryCalChange").bind(this)}).on("click",function(){$(this).datepicker("show")});var t=$(document);this.$datePickerContainer.on("keydown",function(){t.bind("mousemove.datepickertrigger",function(){t.unbind("mousemove.datepickertrigger"),this._handlers.jqueryCalChange(null,null,this)}.bind(this))}.bind(this))}this.dateState=this.initial_date||null,this.setDateInput()}function POWrTimePickerComponent(e){return PowrStrap.call(this,e),this.using_native_inputs?this.handleNativeInputs():void this.setTimeState(this.timeState)}function POWrTimeDropDown(e){PowrStrap.call(this,e),this.enabled=!0,this.timeState=moment_custom(),this.timeState.minute(0),this.execInitializer("$timepicker",this)}function POWrDateTimeComponent(e){PowrStrap.call(this,e),this.dateTimeState=moment_custom(this.initial_date||new Date),this.timeComponent=new POWrTimeDropDown({using_native_inputs:this.using_native_inputs,use_local:this.use_local}).on("change",function(e){var t=e.timeState;this.dateTimeState.hour(t.hours(null,this.use_local),this.use_local),this.dateTimeState.minute(t.minutes(null,this.use_local),this.use_local),this.dateTimeState.second(t.seconds(null,this.use_local),this.use_local),this._setHiddenInput()}.bind(this)),this.$timePickerContainer.append(this.timeComponent.$body),this.dateComponent=new POWrDatePickerComponent({using_native_inputs:this.using_native_inputs,initial_date:this.dateTimeState,use_local:this.use_local}).on("change",function(e){this.dateTimeState.year(e.dateState.year(null,this.use_local),this.use_local),this.dateTimeState.month(e.dateState.month(null,this.use_local),this.use_local),this.dateTimeState.date(e.dateState.date(null,this.use_local),this.use_local),this._setHiddenInput()}.bind(this)),this.$datePickerContainer.append(this.dateComponent.$body);this.formatString="MM-DD-YYYY",this.setFormat(this.formatString),this._init()}!function e(t,n,a){function i(r,s){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(o)return o(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[r]={exports:{}};t[r][0].call(c.exports,function(e){var n=t[r][1][e];return i(n?n:e)},c,c.exports,e,t,n,a)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<a.length;r++)i(a[r]);return i}({1:[function(e,t){t.exports=function(e,t){return function(n){setTimeout(function(){e(n)},t)}}},{}],2:[function(e,t){t.exports=function(e,t,n){var a="s"===n.slice(-1)?n.slice(0,-1):n,i=new Date(e);switch(a.toLowerCase()){case"year":i.setFullYear(i.getFullYear()+t);break;case"quarter":i.setMonth(i.getMonth()+3*t);break;case"month":i.setMonth(i.getMonth()+t);break;case"week":i.setDate(i.getDate()+7*t);break;case"day":i.setDate(i.getDate()+t);break;case"hour":i.setTime(i.getTime()+36e5*t);break;case"minute":i.setTime(i.getTime()+6e4*t);break;case"second":i.setTime(i.getTime()+1e3*t);break;default:i=new Date(0/0)}return i}},{}],3:[function(e){window.moment_custom=e("./momentlte.js"),window.moment=e("./momentlte.js")},{"./momentlte.js":6}],4:[function(e,t){function n(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}function a(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var a=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-a);var i=(t-n)/6048e5;return 1+Math.floor(i)}function i(e){var t=e.getDay();return 0===t&&(t=7),t}function o(e){return null===e?"null":void 0===e?"undefined":"object"!=typeof e?typeof e:Array.isArray(e)?"array":{}.toString.call(e).slice(8,-1).toLowerCase()}function r(){var e=/([YyMmDdSsH]{1,4})|([h]){1,2}|([AaoZ])/g;return function(t,u,c){var d=!c;if(1!==arguments.length||"string"!==o(t)||/\d/.test(t)||(u=t,t=void 0),t=t||new Date,t instanceof Date||(t=new Date(t)),isNaN(t))return new Date(t);u=String(r.masks[u]||u||r.masks["default"]);var p=d?"getUTC":"get",m=t[p+"Date"](),f=t[p+"Day"](),h=t[p+"Month"](),g=t[p+"FullYear"](),v=t[p+"Hours"](),y=t[p+"Minutes"](),w=t[p+"Seconds"](),b=t[p+"Milliseconds"](),_=d?0:t.getTimezoneOffset(),T=a(t),S=i(t),M={Q:"TO BE IMPLEMENTED",Qo:"TO BE IMPLEMENTED",Do:s(m),D:m,DD:n(m),DDD:"TO BE IMPLEMENTED",d:f,dd:n(f),ddd:r.i18n.dayNames[m],dddd:r.i18n.dayNames[m]+"day",m:y,mm:n(y),M:h+1,Mo:s(h+1),MM:n(h+1),MMM:r.i18n.monthNames[h].slice(0,3),MMMM:r.i18n.monthNames[h],YY:String(g).slice(2),yy:String(g).slice(2),yyyy:g,YYYY:g,h:v%12||12,hh:n(v%12||12),H:v,HH:n(v),M:h,s:w,ss:n(w),l:n(b,3),L:n(Math.round(b/10)),A:12>v?"AM":"PM",a:12>v?"AM":"PM",Z:_?l(_):"Z",S:["th","st","nd","rd"][f%10>3?0:(f%100-f%10!=10)*f%10],W:T,N:S};return u.replace(e,function(e){return e in M?M[e]:e.slice(1,e.length-1)})}}var s=e("./ordinalSuffix.js"),l=e("./offsetFix.js");r.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},r.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"]},t.exports=r()},{"./offsetFix.js":7,"./ordinalSuffix.js":8}],5:[function(e,t){var n=function(){var e=(Date.parse,[1,4,5,6,7,10,11]);return function(t){var n,a,i=0;if(!(a=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(t)))return console.warn("Bad date object passed",t),new Date;for(var o,r=0;o=e[r];++r)a[o]=+a[o]||0;return a[2]=(+a[2]||1)-1,a[3]=+a[3]||1,"Z"!==a[8]&&void 0!==a[9]&&(i=60*a[10]+a[11],"+"===a[9]&&(i=0-i)),n=Date.UTC(a[1],a[2],a[3],a[4],a[5]+i,a[6],a[7]),new Date(n)}}();t.exports=n},{}],6:[function(e,t){function n(e){var t="string"==typeof e?TYPE.STRING:null,n="[object Date]"===Object.prototype.toString.call(e)?TYPE.DATE:null,e="object"==typeof e?TYPE.OBJECT:null,a=("function"==typeof e&&e._isAMomentObject?TYPE.MOMENT:null,"function"==typeof e?TYPE.FUNCTION:null);return[t,n,e,a].reduce(function(e,t){return e?e:t})}function a(e){return null!=e||!!e}var i=e("./format.js"),o=e("./fromISOString.js"),r=e("./arbitrator.js"),s=e("./changeDate.js"),l=e("./offsetFix.js");TYPE={STRING:"STRING",DATE:"DATE",OBJECT:"OBJECT",MOMENT:"MOMENT",FUNCTION:"FUNCTION"};var u=function(e){var t,u=n(e);switch(u){case TYPE.STRING:t=o(e);break;case TYPE.DATE:t=new Date(e);break;case TYPE.OBJECT:t=new Date(e.year,e.month,e.date,e.hours,e.minutes,e.seconds,e.milliseconds);break;case TYPE.MOMENT:t=new Date(e._d);break;case TYPE.NUMBER:throw"We dont support numbers.";default:t=new Date}var c=function(e){var a=n(e);if(a===TYPE.DATE)t=e;else{if(a===TYPE.OBJECT)return Object.keys(e).forEach(function(t){c[t](e[t])}),c;t=new Date}return c};return c._d=t,c._isAMomentObject=!0,c.every=function(e,t,n){var a=r(n,1e3*e);return a},c.add=function(e,n){return t=s(t,e,n),c._d=t,c},c.minus=function(e,t){return c.add(-1*e,t)},c.toLocaleISOString=function(){var e=i(t,"YYYY-MM-DDTHH:mm:ss",!0),n=t.getTimezoneOffset(),a=l(n);return e+a},c.toISOString=function(){return c.format("yyyy-MM-DDTHH:mm:ssZ")},c.format=function(e,n){return i(t,e,n)},c.valueOf=function(){return+t},c.get=c.set=function(e,t){return n(e)===TYPE.OBJECT?(Object.keys(e).forEach(function(t){c.set(t,e[t])}),c):a(t)?c[e](t):c[e]()},c.year=c.years=function(e,n){var i=a(e),o=i?"set":"get",r=n?"":"UTC",s="FullYear",l=o+r+s;return i?(t[l](e),c):t[l]()},c.month=c.months=function(e,n){var i=a(e),o=i?"set":"get",r=n?"":"UTC",s="Month",l=o+r+s;return i?(t[l](e),c):t[l]()},c.date=c.dates=function(e,n){var i=a(e),o=i?"set":"get",r=n?"":"UTC",s="Date",l=o+r+s;return i?(t[l](e),c):t[l]()},c.hour=c.hours=function(e,n){var i=a(e),o=i?"set":"get",r=n?"":"UTC",s="Hours",l=o+r+s;return i?(t[l](e),c):t[l]()},c.minute=c.minutes=function(e,n){var i=a(e),o=i?"set":"get",r=n?"":"UTC",s="Minutes",l=o+r+s;return i?(t[l](e),c):t[l]()},c.second=c.seconds=function(e,n){var i=a(e),o=i?"set":"get",r=n?"":"UTC",s="Seconds",l=o+r+s;return i?(t[l](e),c):t[l]()},c.millisecond=c.milliseconds=function(e,n){var i=a(e),o=i?"set":"get",r=n?"":"UTC",s="Milliseconds",l=o+r+s;return i?(t[l](e),c):t[l]()},c.localYear=c.localYears=function(){return t.getFullYear()},c.localMonth=c.localMonths=function(){return t.getMonth()},c.localDate=c.localDates=function(){return t.getDate()},c.localHour=c.localHours=function(){return t.getHours()},c.localMinute=c.localMinutes=function(){return t.getMinutes()},c.localSecond=c.localSeconds=function(){return t.getSeconds()},c.localMillisecond=c.localMilliseconds=function(){return t.getMilliseconds()},c};t.exports=u},{"./arbitrator.js":1,"./changeDate.js":2,"./format.js":4,"./fromISOString.js":5,"./offsetFix.js":7}],7:[function(e,t){function n(e){function t(e){var t=0>e,e=t?-1*e:e;return 10>e?"0"+e:e}var e=parseInt(e);if(!e)return"+00:00";var n=0>e,e=n?-1*e:e,a=Math.floor(e/60),i=e%60,o=t(a),r=t(i),s=o+":"+r;return(n?"+":"-")+s}t.exports=n},{}],8:[function(e,t){t.exports=function(e){var t=["th","st","nd","rd"],n=e%100;return e+(t[(n-20)%10]||t[n]||t[0])}},{}]},{},[3]),function(e){"use strict";e.fn.konami=function(t){var n,a,i;return n=e.extend({},e.fn.konami.defaults,t),this.each(function(){a=[],e(window).keyup(function(e){i=e.keyCode||e.which,n.code.length>a.push(i)||(n.code.length<a.length&&a.shift(),n.code.toString()===a.toString()&&n.cheat())})})},e.fn.konami.defaults={code:[38,38,40,40,37,39,37,39,66,65],cheat:null}}(jQuery),function(e,t,n,a,i,o){function r(e,t){var n=typeof e[t];return"function"==n||!("object"!=n||!e[t])||"unknown"==n}function s(e,t){return!("object"!=typeof e[t]||!e[t])}function l(e){return"[object Array]"===Object.prototype.toString.call(e)}function u(){var e="Shockwave Flash",t="application/x-shockwave-flash";if(!w(navigator.plugins)&&"object"==typeof navigator.plugins[e]){var n=navigator.plugins[e].description;n&&!w(navigator.mimeTypes)&&navigator.mimeTypes[t]&&navigator.mimeTypes[t].enabledPlugin&&(k=n.match(/\d+/g))}if(!k){var a;try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),k=Array.prototype.slice.call(a.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),a=null}catch(i){}}if(!k)return!1;var o=parseInt(k[0],10),r=parseInt(k[1],10);return E=o>9&&r>0,!0}function c(){if(!V){V=!0;for(var e=0;e<Y.length;e++)Y[e]();Y.length=0}}function d(e,t){return V?void e.call(t):void Y.push(function(){e.call(t)})}function p(){var e=parent;if(""!==F)for(var t=0,n=F.split(".");t<n.length;t++)e=e[n[t]];return e.easyXDM}function m(t){return e.easyXDM=H,F=t,F&&(W="easyXDM_"+F.replace(".","_")+"_"),U}function f(e){return e.match(N)[3]}function h(e){return e.match(N)[4]||""}function g(e){var t=e.toLowerCase().match(N),n=t[2],a=t[3],i=t[4]||"";return("http:"==n&&":80"==i||"https:"==n&&":443"==i)&&(i=""),n+"//"+a+i}function v(e){if(e=e.replace(L,"$1/"),!e.match(/^(http||https):\/\//)){var t="/"===e.substring(0,1)?"":n.pathname;"/"!==t.substring(t.length-1)&&(t=t.substring(0,t.lastIndexOf("/")+1)),e=n.protocol+"//"+n.host+t+e}for(;B.test(e);)e=e.replace(B,"");return e}function y(e,t){var n="",a=e.indexOf("#");-1!==a&&(n=e.substring(a),e=e.substring(0,a));var i=[];for(var r in t)t.hasOwnProperty(r)&&i.push(r+"="+o(t[r]));return e+(R?"#":-1==e.indexOf("?")?"?":"&")+i.join("&")+n}function w(e){return"undefined"==typeof e}function b(e,t,n){var a;for(var i in t)t.hasOwnProperty(i)&&(i in e?(a=t[i],"object"==typeof a?b(e[i],a,n):n||(e[i]=t[i])):e[i]=t[i]);return e}function _(){var e=t.body.appendChild(t.createElement("form")),n=e.appendChild(t.createElement("input"));n.name=W+"TEST"+$,C=n!==e.elements[n.name],t.body.removeChild(e)}function T(e){w(C)&&_();var n;C?n=t.createElement('<iframe name="'+e.props.name+'"/>'):(n=t.createElement("IFRAME"),n.name=e.props.name),n.id=n.name=e.props.name,delete e.props.name,"string"==typeof e.container&&(e.container=t.getElementById(e.container)),e.container||(b(n.style,{position:"absolute",top:"-2000px",left:"0px"}),e.container=t.body);var a=e.props.src;if(e.props.src="javascript:false",b(n,e.props),n.border=n.frameBorder=0,n.allowTransparency=!0,e.container.appendChild(n),e.onLoad&&I(n,"load",e.onLoad),e.usePost){var i,o=e.container.appendChild(t.createElement("form"));if(o.target=n.name,o.action=a,o.method="POST","object"==typeof e.usePost)for(var r in e.usePost)e.usePost.hasOwnProperty(r)&&(C?i=t.createElement('<input name="'+r+'"/>'):(i=t.createElement("INPUT"),i.name=r),i.value=e.usePost[r],o.appendChild(i));o.submit(),o.parentNode.removeChild(o)}else n.src=a;return e.props.src=a,n}function S(e,t){"string"==typeof e&&(e=[e]);for(var n,a=e.length;a--;)if(n=e[a],n=new RegExp("^"==n.substr(0,1)?n:"^"+n.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),n.test(t))return!0;return!1}function M(a){var i,o=a.protocol;if(a.isHost=a.isHost||w(J.xdm_p),R=a.hash||!1,a.props||(a.props={}),a.isHost)a.remote=v(a.remote),a.channel=a.channel||"default"+$++,a.secret=Math.random().toString(16).substring(2),w(o)&&(o=g(n.href)==g(a.remote)?"4":r(e,"postMessage")||r(t,"postMessage")?"1":a.swf&&r(e,"ActiveXObject")&&u()?"6":"Gecko"===navigator.product&&"frameElement"in e&&-1==navigator.userAgent.indexOf("WebKit")?"5":a.remoteHelper?"2":"0");else if(a.channel=J.xdm_c.replace(/["'<>\\]/g,""),a.secret=J.xdm_s,a.remote=J.xdm_e.replace(/["'<>\\]/g,""),o=J.xdm_p,a.acl&&!S(a.acl,a.remote))throw new Error("Access denied for "+a.remote);switch(a.protocol=o,o){case"0":if(b(a,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),a.isHost){if(!a.local){for(var s,l=n.protocol+"//"+n.host,c=t.body.getElementsByTagName("img"),d=c.length;d--;)if(s=c[d],s.src.substring(0,l.length)===l){a.local=s.src;break}a.local||(a.local=e)}var p={xdm_c:a.channel,xdm_p:0};a.local===e?(a.usePolling=!0,a.useParent=!0,a.local=n.protocol+"//"+n.host+n.pathname+n.search,p.xdm_e=a.local,p.xdm_pa=1):p.xdm_e=v(a.local),a.container&&(a.useResize=!1,p.xdm_po=1),a.remote=y(a.remote,p)}else b(a,{channel:J.xdm_c,remote:J.xdm_e,useParent:!w(J.xdm_pa),usePolling:!w(J.xdm_po),useResize:a.useParent?!1:a.useResize});i=[new U.stack.HashTransport(a),new U.stack.ReliableBehavior({}),new U.stack.QueueBehavior({encode:!0,maxLength:4e3-a.remote.length}),new U.stack.VerifyBehavior({initiate:a.isHost})];break;case"1":i=[new U.stack.PostMessageTransport(a)];break;case"2":a.remoteHelper=v(a.remoteHelper),i=[new U.stack.NameTransport(a),new U.stack.QueueBehavior,new U.stack.VerifyBehavior({initiate:a.isHost})];break;case"3":i=[new U.stack.NixTransport(a)];break;case"4":i=[new U.stack.SameOriginTransport(a)];break;case"5":i=[new U.stack.FrameElementTransport(a)];break;case"6":k||u(),i=[new U.stack.FlashTransport(a)]}return i.push(new U.stack.QueueBehavior({lazy:a.lazy,remove:!0})),i}function D(e){for(var t,n={incoming:function(e,t){this.up.incoming(e,t)},outgoing:function(e,t){this.down.outgoing(e,t)},callback:function(e){this.up.callback(e)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},a=0,i=e.length;i>a;a++)t=e[a],b(t,n,!0),0!==a&&(t.down=e[a-1]),a!==i-1&&(t.up=e[a+1]);return t}function P(e){e.up.down=e.down,e.down.up=e.up,e.up=e.down=null}var C,k,E,I,A,O=this,$=Math.floor(1e4*Math.random()),x=Function.prototype,N=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,B=/[\-\w]+\/\.\.\//,L=/([^:])\/\//g,F="",U={},H=e.easyXDM,W="easyXDM_",R=!1;if(r(e,"addEventListener"))I=function(e,t,n){e.addEventListener(t,n,!1)},A=function(e,t,n){e.removeEventListener(t,n,!1)};else{if(!r(e,"attachEvent"))throw new Error("Browser not supported");I=function(e,t,n){e.attachEvent("on"+t,n)},A=function(e,t,n){e.detachEvent("on"+t,n)}}var j,V=!1,Y=[];if("readyState"in t?(j=t.readyState,V="complete"==j||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==j||"interactive"==j)):V=!!t.body,!V){if(r(e,"addEventListener"))I(t,"DOMContentLoaded",c);else if(I(t,"readystatechange",function(){"complete"==t.readyState&&c()}),t.documentElement.doScroll&&e===top){var z=function(){if(!V){try{t.documentElement.doScroll("left")}catch(e){return void a(z,1)}c()}};z()}I(e,"load",c)}var J=function(e){e=e.substring(1).split("&");for(var t,n={},a=e.length;a--;)t=e[a].split("="),n[t[0]]=i(t[1]);return n}(/xdm_e=/.test(n.search)?n.search:n.hash),Q=function(){var e={},t={a:[1,2,3]},n='{"a":[1,2,3]}';return"undefined"!=typeof JSON&&"function"==typeof JSON.stringify&&JSON.stringify(t).replace(/\s/g,"")===n?JSON:(Object.toJSON&&Object.toJSON(t).replace(/\s/g,"")===n&&(e.stringify=Object.toJSON),"function"==typeof String.prototype.evalJSON&&(t=n.evalJSON(),t.a&&3===t.a.length&&3===t.a[2]&&(e.parse=function(e){return e.evalJSON()})),e.stringify&&e.parse?(Q=function(){return e},e):null)};b(U,{version:"2.4.17.1",query:J,stack:{},apply:b,getJSONObject:Q,whenReady:d,noConflict:m}),U.DomHelper={on:I,un:A,requiresJSON:function(n){s(e,"JSON")||t.write('<script type="text/javascript" src="'+n+'"></script>')}},function(){var e={};U.Fn={set:function(t,n){e[t]=n},get:function(t,n){var a=e[t];return n&&delete e[t],a}}}(),U.Socket=function(e){var t=D(M(e).concat([{incoming:function(t,n){e.onMessage(t,n)},callback:function(t){e.onReady&&e.onReady(t)}}])),n=g(e.remote);this.origin=g(e.remote),this.destroy=function(){t.destroy()},this.postMessage=function(e){t.outgoing(e,n)},t.init()},U.Rpc=function(e,t){if(t.local)for(var n in t.local)if(t.local.hasOwnProperty(n)){var a=t.local[n];"function"==typeof a&&(t.local[n]={method:a})}var i=D(M(e).concat([new U.stack.RpcBehavior(this,t),{callback:function(t){e.onReady&&e.onReady(t)}}]));this.origin=g(e.remote),this.destroy=function(){i.destroy()},i.init()},U.stack.SameOriginTransport=function(e){var t,i,o,r;return t={outgoing:function(e,t,n){o(e),n&&n()},destroy:function(){i&&(i.parentNode.removeChild(i),i=null)},onDOMReady:function(){r=g(e.remote),e.isHost?(b(e.props,{src:y(e.remote,{xdm_e:n.protocol+"//"+n.host+n.pathname,xdm_c:e.channel,xdm_p:4}),name:W+e.channel+"_provider"}),i=T(e),U.Fn.set(e.channel,function(e){return o=e,a(function(){t.up.callback(!0)},0),function(e){t.up.incoming(e,r)}})):(o=p().Fn.get(e.channel,!0)(function(e){t.up.incoming(e,r)}),a(function(){t.up.callback(!0)},0))},init:function(){d(t.onDOMReady,t)}}},U.stack.FlashTransport=function(e){function i(e){a(function(){r.up.incoming(e,l)},0)}function o(n){var a=e.swf+"?host="+e.isHost,i="easyXDM_swf_"+Math.floor(1e4*Math.random());U.Fn.set("flash_loaded"+n.replace(/[\-.]/g,"_"),function(){U.stack.FlashTransport[n].swf=u=c.firstChild;for(var e=U.stack.FlashTransport[n].queue,t=0;t<e.length;t++)e[t]();e.length=0}),e.swfContainer?c="string"==typeof e.swfContainer?t.getElementById(e.swfContainer):e.swfContainer:(c=t.createElement("div"),b(c.style,E&&e.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),t.body.appendChild(c));var o="callback=flash_loaded"+n.replace(/[\-.]/g,"_")+"&proto="+O.location.protocol+"&domain="+f(O.location.href)+"&port="+h(O.location.href)+"&ns="+F;c.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+i+"' data='"+a+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+a+"'></param><param name='flashvars' value='"+o+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+o+"' allowScriptAccess='always' wmode='transparent' src='"+a+"' height='1' width='1'></embed></object>"}var r,s,l,u,c;return r={outgoing:function(t,n,a){u.postMessage(e.channel,t.toString()),a&&a()},destroy:function(){try{u.destroyChannel(e.channel)}catch(t){}u=null,s&&(s.parentNode.removeChild(s),s=null)},onDOMReady:function(){l=e.remote,U.Fn.set("flash_"+e.channel+"_init",function(){a(function(){r.up.callback(!0)})}),U.Fn.set("flash_"+e.channel+"_onMessage",i),e.swf=v(e.swf);var t=f(e.swf),c=function(){U.stack.FlashTransport[t].init=!0,u=U.stack.FlashTransport[t].swf,u.createChannel(e.channel,e.secret,g(e.remote),e.isHost),e.isHost&&(E&&e.swfNoThrottle&&b(e.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),b(e.props,{src:y(e.remote,{xdm_e:g(n.href),xdm_c:e.channel,xdm_p:6,xdm_s:e.secret}),name:W+e.channel+"_provider"}),s=T(e))};U.stack.FlashTransport[t]&&U.stack.FlashTransport[t].init?c():U.stack.FlashTransport[t]?U.stack.FlashTransport[t].queue.push(c):(U.stack.FlashTransport[t]={queue:[c]},o(t))},init:function(){d(r.onDOMReady,r)}}},U.stack.PostMessageTransport=function(t){function i(e){if(e.origin)return g(e.origin);if(e.uri)return g(e.uri);if(e.domain)return n.protocol+"//"+e.domain;throw"Unable to retrieve the origin of the event"}function o(e){var n=i(e);n==u&&e.data.substring(0,t.channel.length+1)==t.channel+" "&&r.up.incoming(e.data.substring(t.channel.length+1),n)}var r,s,l,u;return r={outgoing:function(e,n,a){l.postMessage(t.channel+" "+e,n||u),a&&a()},destroy:function(){A(e,"message",o),s&&(l=null,s.parentNode.removeChild(s),s=null)},onDOMReady:function(){if(u=g(t.remote),t.isHost){var i=function(n){n.data==t.channel+"-ready"&&(l="postMessage"in s.contentWindow?s.contentWindow:s.contentWindow.document,A(e,"message",i),I(e,"message",o),a(function(){r.up.callback(!0)},0))};I(e,"message",i),b(t.props,{src:y(t.remote,{xdm_e:g(n.href),xdm_c:t.channel,xdm_p:1}),name:W+t.channel+"_provider"}),s=T(t)}else I(e,"message",o),l="postMessage"in e.parent?e.parent:e.parent.document,l.postMessage(t.channel+"-ready",u),a(function(){r.up.callback(!0)},0)},init:function(){d(r.onDOMReady,r)}}},U.stack.FrameElementTransport=function(i){var o,r,s,l;return o={outgoing:function(e,t,n){s.call(this,e),n&&n()},destroy:function(){r&&(r.parentNode.removeChild(r),r=null)},onDOMReady:function(){l=g(i.remote),i.isHost?(b(i.props,{src:y(i.remote,{xdm_e:g(n.href),xdm_c:i.channel,xdm_p:5}),name:W+i.channel+"_provider"}),r=T(i),r.fn=function(e){return delete r.fn,s=e,a(function(){o.up.callback(!0)},0),function(e){o.up.incoming(e,l)}}):(t.referrer&&g(t.referrer)!=J.xdm_e&&(e.top.location=J.xdm_e),s=e.frameElement.fn(function(e){o.up.incoming(e,l)}),o.up.callback(!0))},init:function(){d(o.onDOMReady,o)}}},U.stack.NameTransport=function(e){function t(t){var n=e.remoteHelper+(s?"#_3":"#_2")+e.channel;l.contentWindow.sendMessage(t,n)}function n(){s?2!==++c&&s||r.up.callback(!0):(t("ready"),r.up.callback(!0))}function i(e){r.up.incoming(e,m)}function o(){p&&a(function(){p(!0)},0)}var r,s,l,u,c,p,m,f;return r={outgoing:function(e,n,a){p=a,t(e)},destroy:function(){l.parentNode.removeChild(l),l=null,s&&(u.parentNode.removeChild(u),u=null)},onDOMReady:function(){s=e.isHost,c=0,m=g(e.remote),e.local=v(e.local),s?(U.Fn.set(e.channel,function(t){s&&"ready"===t&&(U.Fn.set(e.channel,i),n())}),f=y(e.remote,{xdm_e:e.local,xdm_c:e.channel,xdm_p:2}),b(e.props,{src:f+"#"+e.channel,name:W+e.channel+"_provider"}),u=T(e)):(e.remoteHelper=e.remote,U.Fn.set(e.channel,i));var t=function(){var i=l||this;A(i,"load",t),U.Fn.set(e.channel+"_load",o),function r(){"function"==typeof i.contentWindow.sendMessage?n():a(r,50)}()};l=T({props:{src:e.local+"#_4"+e.channel},onLoad:t})},init:function(){d(r.onDOMReady,r)}}},U.stack.HashTransport=function(t){function n(e){if(h){var n=t.remote+"#"+m++ +"_"+e;(l||!v?h.contentWindow:h).location=n}}function i(e){p=e,s.up.incoming(p.substring(p.indexOf("_")+1),y)
}function o(){if(f){var e=f.location.href,t="",n=e.indexOf("#");-1!=n&&(t=e.substring(n)),t&&t!=p&&i(t)}}function r(){u=setInterval(o,c)}var s,l,u,c,p,m,f,h,v,y;return s={outgoing:function(e){n(e)},destroy:function(){e.clearInterval(u),(l||!v)&&h.parentNode.removeChild(h),h=null},onDOMReady:function(){if(l=t.isHost,c=t.interval,p="#"+t.channel,m=0,v=t.useParent,y=g(t.remote),l){if(b(t.props,{src:t.remote,name:W+t.channel+"_provider"}),v)t.onLoad=function(){f=e,r(),s.up.callback(!0)};else{var n=0,i=t.delay/50;!function o(){if(++n>i)throw new Error("Unable to reference listenerwindow");try{f=h.contentWindow.frames[W+t.channel+"_consumer"]}catch(e){}f?(r(),s.up.callback(!0)):a(o,50)}()}h=T(t)}else f=e,r(),v?(h=parent,s.up.callback(!0)):(b(t,{props:{src:t.remote+"#"+t.channel+new Date,name:W+t.channel+"_consumer"},onLoad:function(){s.up.callback(!0)}}),h=T(t))},init:function(){d(s.onDOMReady,s)}}},U.stack.ReliableBehavior=function(){var e,t,n=0,a=0,i="";return e={incoming:function(o,r){var s=o.indexOf("_"),l=o.substring(0,s).split(",");o=o.substring(s+1),l[0]==n&&(i="",t&&(t(!0),t=null)),o.length>0&&(e.down.outgoing(l[1]+","+n+"_"+i,r),a!=l[1]&&(a=l[1],e.up.incoming(o,r)))},outgoing:function(o,r,s){i=o,t=s,e.down.outgoing(a+","+ ++n+"_"+o,r)}}},U.stack.QueueBehavior=function(e){function t(){if(e.remove&&0===s.length)return void P(n);if(!l&&0!==s.length&&!r){l=!0;var i=s.shift();n.down.outgoing(i.data,i.origin,function(e){l=!1,i.callback&&a(function(){i.callback(e)},0),t()})}}var n,r,s=[],l=!0,u="",c=0,d=!1,p=!1;return n={init:function(){w(e)&&(e={}),e.maxLength&&(c=e.maxLength,p=!0),e.lazy?d=!0:n.down.init()},callback:function(e){l=!1;var a=n.up;t(),a.callback(e)},incoming:function(t,a){if(p){var o=t.indexOf("_"),r=parseInt(t.substring(0,o),10);u+=t.substring(o+1),0===r&&(e.encode&&(u=i(u)),n.up.incoming(u,a),u="")}else n.up.incoming(t,a)},outgoing:function(a,i,r){e.encode&&(a=o(a));var l,u=[];if(p){for(;0!==a.length;)l=a.substring(0,c),a=a.substring(l.length),u.push(l);for(;l=u.shift();)s.push({data:u.length+"_"+l,origin:i,callback:0===u.length?r:null})}else s.push({data:a,origin:i,callback:r});d?n.down.init():t()},destroy:function(){r=!0,n.down.destroy()}}},U.stack.VerifyBehavior=function(e){function t(){a=Math.random().toString(16).substring(2),n.down.outgoing(a)}var n,a,i;return n={incoming:function(o,r){var s=o.indexOf("_");-1===s?o===a?n.up.callback(!0):i||(i=o,e.initiate||t(),n.down.outgoing(o)):o.substring(0,s)===i&&n.up.incoming(o.substring(s+1),r)},outgoing:function(e,t,i){n.down.outgoing(a+"_"+e,t,i)},callback:function(){e.initiate&&t()}}},U.stack.RpcBehavior=function(e,t){function n(e){e.jsonrpc="2.0",o.down.outgoing(r.stringify(e))}function a(e,t){var a=Array.prototype.slice;return function(){var i,o=arguments.length,r={method:t};o>0&&"function"==typeof arguments[o-1]?(o>1&&"function"==typeof arguments[o-2]?(i={success:arguments[o-2],error:arguments[o-1]},r.params=a.call(arguments,0,o-2)):(i={success:arguments[o-1]},r.params=a.call(arguments,0,o-1)),u[""+ ++s]=i,r.id=s):r.params=a.call(arguments,0),e.namedParams&&1===r.params.length&&(r.params=r.params[0]),n(r)}}function i(e,t,a,i){if(!a)return void(t&&n({id:t,error:{code:-32601,message:"Procedure not found."}}));var o,r;t?(o=function(e){o=x,n({id:t,result:e})},r=function(e,a){r=x;var i={id:t,error:{code:-32099,message:e}};a&&(i.error.data=a),n(i)}):o=r=x,l(i)||(i=[i]);try{var s=a.method.apply(a.scope,i.concat([o,r]));w(s)||o(s)}catch(u){r(u.message)}}var o,r=t.serializer||Q(),s=0,u={};return o={incoming:function(e){var a=r.parse(e);if(a.method)t.handle?t.handle(a,n):i(a.method,a.id,t.local[a.method],a.params);else{var o=u[a.id];a.error?o.error&&o.error(a.error):o.success&&o.success(a.result),delete u[a.id]}},init:function(){if(t.remote)for(var n in t.remote)t.remote.hasOwnProperty(n)&&(e[n]=a(t.remote[n],n));o.down.init()},destroy:function(){for(var n in t.remote)t.remote.hasOwnProperty(n)&&e.hasOwnProperty(n)&&delete e[n];o.down.destroy()}}},O.easyXDM=U}(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent),$(function(){countdownTimerBaseModel=appModel.extend({baseDefaults:function(){var e={elementSize:"60px",elementSpacing:"3px",backgroundGradient:!1,backgroundColor:"#120a1e",backgroundStartColor:"#979797",backgroundEndColor:"#120a1e",backgroundBorderColor:"#dbdbdb",backgroundBorderRadius:"3px",backgroundBorderWidth:"1px",backgroundShadow:"none",targetDate:moment().add(1,"month").toLocaleISOString(),targetDateFormat:"",countDirection:"down",interval:1,intervalUnit:"seconds",targetType:"date",targetNumber:"",perVisitorQuantity:"10",perVisitorUnit:"m",repeatQuantity:"1",repeatUnit:"M",beforeCompletion:"banner",beforeTitle:"",beforeSubtitle:"",beforeButtonType:"link",beforeButtonText:"",beforeButtonUrl:"",beforeBannerImage:"",paypalBeforeQuantity:1,paypalBeforeButtonText:"Purchase",paypalBeforePaypalAccount:"",paypalBeforeCurrencyCode:"USD",paypalBeforePurchaseType:"BuyNow",paypalBeforeSuccessUrl:"",paypalBeforeItemName:"My product",paypalBeforeItemCost:"10.00",paypalBeforeAllowUserToSpecifyPrice:!1,paypalBeforeAllowUserToSpecifyQuantity:!1,paypalBeforeTrialOn:!1,paypalBeforeTrialPrice:0,paypalBeforeTrialDuration:30,paypalBeforeTrialDurationUnits:"D",paypalBeforeSubscriptionPrice:10,paypalBeforeSubscriptionDuration:1,paypalBeforeSubscriptionDurationUnits:"M",paypalBeforeShippingCost:"",paypalBeforeNoShipping:"0",beforeBackgroundColor:"rgba(255, 255, 255, 0.5)",beforeBackgroundGradient:!1,beforeBannerStyle:"layout3",linkBehavior:"_blank",afterCompletion:"banner",finishedTitle:"",finishedSubtitle:"",finishedButtonType:"link",finishedButtonText:"",finishedButtonUrl:"",finishedBannerImage:"",paypalQuantity:1,paypalButtonText:"Purchase",paypalPaypalAccount:"",paypalCurrencyCode:"USD",paypalPurchaseType:"BuyNow",paypalSuccessUrl:"",paypalItemName:"My product",paypalItemCost:"10.00",paypalAllowUserToSpecifyPrice:!1,paypalAllowUserToSpecifyQuantity:!1,paypalTrialOn:!1,paypalTrialPrice:0,paypalTrialDuration:30,paypalTrialDurationUnits:"D",paypalSubscriptionPrice:10,paypalSubscriptionDuration:1,paypalSubscriptionDurationUnits:"M",paypalShippingCost:"",paypalNoShipping:"0",beforeBackgroundStartColor:"#fff",beforeBackgroundEndColor:"#c0c0c0",finishedBackgroundColor:"rgba(255, 255, 255, 0.5)",finishedBackgroundStartColor:"#fff",finishedBackgroundEndColor:"#c0c0c0",finishedBackgroundGradient:!1,finishedBannerStyle:"layout3",timeLabels:"Days-Hours-Minutes-Seconds",separatorType:"colon",showDays:!0,showHours:!0,showMinutes:!0,showSeconds:!0,daysLabel:"",hoursLabel:"",minutesLabel:"",secondsLabel:"",elementFontColor:"#dbdbdb",elementFontFamily:"Basic",animationSpeed:"90",countdownAnimation:"slideDown",title:"",titleFontFamily:"Open Sans",titleFontSize:"28px",titleFontColor:"#dbdbdb",labelFontFamily:"Open Sans",labelFontColor:"#dbdbdb",passwordProtectOn:!1,customCSS:"",customJS:""};return"wix"==HOST&&(e.backgroundBorderColorWix="color-3",e.backgroundColorWix="color-1",e.backgroundStartColorWix="color-1",e.backgroundEndColorWix="color-2",e.elementFontColorWix="color-4",e.titleFontColorWix="color-3",e.labelFontColorWix="color-4"),e},presets:function(){var e={elementFontColor:"color",backgroundColor:"backgroundColor",backgroundStartColor:"backgroundColor",backgroundEndColor:"backgroundColor",backgroundBorderColor:"color",titleFontColor:"color",labelFontColor:"color",elementFontFamily:"fontFamily",titleFontFamily:"fontFamily",labelFontFamily:"fontFamily"};return e},intervalInMs:function(){if($.inArray(this.get("targetType"),["timePerPageLoad","timePerVisitor","date"])>-1)return 1e3;var e=parseFloat(this.get("interval"));return e*={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5}[this.get("intervalUnit")]},secondsRemaining:function(){var e=this,t=e.intervalInMs(),n=e.get("countDirection")||"down",a=e.get("targetType");if("timePerVisitor"==a||"timePerPageLoad"==a){var i=parseFloat(e.get("perVisitorQuantity"));switch(e.get("perVisitorUnit")){case"s":seconds_diff=i;break;case"m":seconds_diff=60*i;break;case"h":seconds_diff=3600*i;break;case"d":seconds_diff=86400*i}if("timePerVisitor"==a){var o=getCookie("powr_countdown_"+e.meta.id,!0);if(o)var r=parseInt(getCookie("powr_countdown_"+e.meta.id,!0));else{var r=(new Date).getTime()/t+seconds_diff;setCookie("powr_countdown_"+e.meta.id,r,10,!0)}}else var r=(new Date).getTime()/t+seconds_diff}else var s=new Date(e.get("locals").endDate||e.get("targetDate")),r=s.getTime()/t;var l=new Date,u=l.getTime()/t,c=Math.round(r-u);"down"==n&&0>c&&(c=0),c="up"==n&&c>0?0:Math.abs(c);for(var d=e.get("locals").currentNumber||[],p=d.length-1;p>=0;p--)d[p].interval==t&&d.splice(p,1);return d.push({number:c,interval:t}),e.setLocals({currentNumber:d},{silent:!0}),c},calculateStartDate:function(e,t){var n=this,a=(new Date).valueOf(),i=(parseInt(n.get("targetNumber"))||0)*n.intervalInMs(),o=n.get("locals").currentNumber||[];if(!t)for(var r=n.intervalInMs(),s=o.length-1;s>=0;s--)if(o[s].interval!=r){t=o[s].number;break}!e&&t&&(debug()("Soft reset",t),i=t*n.intervalInMs()),"up"==n.get("countDirection")?a-=i:a+=i;try{var l=new Date(a).toISOString().replace(/\.\d{3}Z^/,"");n.get("targetDate")!=l&&n.set("targetDate",l,{silent:!1})}catch(u){debug()("Trouble computing date")}}}),countdownTimerAppModel=countdownTimerBaseModel,countUpTimerAppModel=countdownTimerBaseModel,holidayCountdownAppModel=countdownTimerBaseModel,countdownTimerAppSettings=appSettings.extend({afterInitialize:function(){var e=this;["countDown","slideDown","flipBottom","scaleUp","popup"].map(function(t){e.$el.on("mouseenter",".transition_img_"+t,function(){$(".transition_img_"+t).attr("src","https://s3-us-west-1.amazonaws.com/powr/countdown_timer/"+t+".gif")}),e.$el.on("mouseleave",".transition_img_"+t,function(){$(".transition_img_"+t).attr("src","https://s3-us-west-1.amazonaws.com/powr/countdown_timer/number.png")})}),e.initializePaypalSettings("paypal"),e.initializePaypalSettings("paypalBefore"),e.updateConditionals();var t=function(){e.model.setLocals({afterCompletionChanged:!0}),e.previewFinished(),e.updateConditionals()};e.$el.find(".afterCompletion").on("keyup","input",t).on("change","input,select",t),e.$el.on("click",".showPreview",function(){t()}),e.$el.on("click",".hidePreview",function(){e.hidePreview()}),e.$el.on("change",'[name="targetType"]',function(){$.inArray($(this).val(),["timePerVisitor","timePerPageLoad"])>-1&&e.$el.find('[name="countDirection"]').val("down").change()})},afterRender:function(){var e=this,t=function(t){if("number"==e.model.get("targetType")){$(document.activeElement).blur();var n=e.model.get("targetDate");e.model.calculateStartDate(t),e.$el.find('[name="targetDate"]').val(n),e.model.triggerChange()}},n=function(){e.model.triggerChange(),setTimeout(function(){t(!0)},1e3)},a=function(){window.SOFT_TIMEOUT&&clearTimeout(SOFT_TIMEOUT),SOFT_TIMEOUT=setTimeout(function(){t(!1)},400)};e.$el.on("click",".recalculate",n);for(var i=["interval","intervalUnit","countDirection"],o=0;o<i.length;o++)e.$el.on("change",'[name="'+i[o]+'"]',a);for(var r=["interval","intervalUnit"],o=0;o<r.length;o++)e.$el.on("keyup",'[name="'+r[o]+'"]',a),e.$el.on("focus",'[name="'+r[o]+'"]',function(){e.model.secondsRemaining()})},afterUpdate:function(){var e=this;"timePerVisitor"==e.model.get("targetType")&&setCookie("powr_countdown_"+e.model.meta.id,0,-999,!0),e.model.setLocals(e.model.get("locals").afterCompletionChanged?{afterCompletionChanged:!1}:{previewing:!1}),this.updateConditionals(),this.model.triggerChange(),$(".showSecondsCheckbox .switch").hasClass("off")?$(".showingSeconds").removeClass("hid"):$(".showingSeconds").addClass("hid")},updateConditionals:function(){var e=this;switch("custom"==e.model.get("timeLabels")?e.$el.find(".customTimeLabels").slideDown():e.$el.find(".customTimeLabels").slideUp(),"date"==e.model.get("targetType")&&"repeat"==e.model.get("afterCompletion")?e.$el.find(".whenRepeatingAndDate").slideDown():e.$el.find(".whenRepeatingAndDate").slideUp(),e.model.get("afterCompletion")){case"none":e.$el.find(".whenRepeating").slideUp(),e.$el.find(".afterCompletion").slideUp();break;case"banner":e.$el.find(".whenRepeating").slideUp(),e.$el.find(".afterCompletion").slideDown();break;case"repeat":e.$el.find(".afterCompletion").slideUp(),e.$el.find(".whenRepeating").slideDown()}"banner"==e.model.get("beforeCompletion")||"banner"==e.model.get("afterCompletion")?e.$el.find(".beforeOrAfterCompletion").slideDown():e.$el.find(".beforeOrAfterCompletion").slideUp();var t=e.model.get("finishedButtonType"),n=e.$el.find(".afterCompletion").find(".buttonOptions"),a=e.$el.find(".afterCompletion").find(".paymentOptions");switch(t){case"none":n.slideUp(),a.slideUp();break;case"link":n.slideDown(),a.slideUp();break;case"":n.slideDown(),a.slideUp();break;case"payment":n.slideUp(),a.slideDown()}switch(t=e.model.get("beforeButtonType"),n=e.$el.find(".beforeCompletion").find(".buttonOptions"),a=e.$el.find(".beforeCompletion").find(".paymentOptions"),t){case"none":n.slideUp(),a.slideUp();break;case"link":n.slideDown(),a.slideUp();break;case"":n.slideDown(),a.slideUp();break;case"payment":n.slideUp(),a.slideDown()}switch(e.model.get("targetType")){case"date":e.$el.find(".whenDateCont").slideDown(),e.$el.find(".whenDateFeatures").slideDown(),e.$el.find(".countDirection").slideDown(),e.$el.find(".whenNumber").slideUp(),e.$el.find(".whenPerVisitor").slideUp();break;case"number":e.$el.find(".whenDateCont").slideUp(),e.$el.find(".whenDateFeatures").slideUp(),e.$el.find(".countDirection").slideDown(),e.$el.find(".whenNumber").slideDown(),e.$el.find(".whenPerVisitor").slideUp();break;case"timePerVisitor":e.$el.find(".whenDateCont").slideUp(),e.$el.find(".whenDateFeatures").slideDown(),e.$el.find(".whenNumber").slideUp(),e.$el.find(".countDirection").slideUp(),e.$el.find(".whenPerVisitor").slideDown();break;case"timePerPageLoad":e.$el.find(".whenDateCont").slideUp(),e.$el.find(".whenDateFeatures").slideDown(),e.$el.find(".whenNumber").slideUp(),e.$el.find(".countDirection").slideUp(),e.$el.find(".whenPerVisitor").slideDown()}e.model.get("locals").previewing?(e.$el.find(".hidePreview").slideDown(),e.$el.find(".showPreview").slideUp()):(e.$el.find(".hidePreview").slideUp(),e.$el.find(".showPreview").slideDown()),e.model.intervalInMs()<15?e.$el.find(".tooSmall").slideDown():e.$el.find(".tooSmall").slideUp()},previewFinished:function(){"banner"==this.model.get("afterCompletion")&&(this.model.setLocals({previewing:!0}),this.model.triggerChange())},hidePreview:function(){this.model.get("locals").previewing&&(this.model.setLocals({previewing:!1}),this.updateConditionals(),this.model.triggerChange())}}),countdownTimerAppView=appView.extend({afterInitialize:function(){this.$el.on("click",".paypalSubmitButton",function(){return $(this).parents(".paypalForm").find('input[name="business"]').val().length>0&&$(this).parents(".paypalForm").submit(),!1})},setMetaContent:function(){var e=this.model.get("title");this.writeMetaContent(e)},beforeRender:function(){var e=this.model,t=e.secondsRemaining();"number"==e.get("targetType")&&e.setLocals({digits:Math.max(5,t.toString().length+1)});var n={title:e.get("finishedTitle"),subtitle:e.get("finishedSubtitle"),buttonType:e.get("finishedButtonType"),buttonText:e.get("finishedButtonText"),buttonUrl:e.get("finishedButtonUrl"),bannerImage:e.get("finishedBannerImage"),titleFontSize:1.5*parseInt(e.get("titleFontSize")),subtitleFontSize:parseInt(e.get("titleFontSize")),paypalQuantity:e.get("paypalQuantity"),paypalButtonText:e.get("paypalButtonText"),paypalPaypalAccount:e.get("paypalPaypalAccount"),paypalCurrencyCode:e.get("paypalCurrencyCode"),paypalPurchaseType:e.get("paypalPurchaseType"),paypalSuccessUrl:e.get("paypalSuccessUrl"),paypalItemName:e.get("paypalItemName"),paypalItemCost:e.get("paypalItemCost"),paypalAllowUserToSpecifyPrice:e.get("paypalAllowUserToSpecifyPrice"),paypalAllowUserToSpecifyQuantity:e.get("paypalAllowUserToSpecifyQuantity"),paypalTrialOn:e.get("paypalTrialOn"),paypalTrialPrice:e.get("paypalTrialPrice"),paypalTrialDuration:e.get("paypalTrialDuration"),paypalTrialDurationUnits:e.get("paypalTrialDurationUnits"),paypalSubscriptionPrice:e.get("paypalSubscriptionPrice"),paypalSubscriptionDuration:e.get("paypalSubscriptionDuration"),paypalSubscriptionDurationUnits:e.get("paypalSubscriptionDurationUnits"),paypalShippingCost:e.get("paypalShippingCost"),paypalNoShipping:e.get("paypalNoShipping"),textFontColor:e.get("titleFontColor"),textFontFamily:e.get("titleFontFamily"),backgroundColor:e.get("finishedBackgroundColor")},a={title:e.get("beforeTitle"),subtitle:e.get("beforeSubtitle"),buttonType:e.get("beforeButtonType"),buttonText:e.get("beforeButtonText"),buttonUrl:e.get("beforeButtonUrl"),bannerImage:e.get("beforeBannerImage"),titleFontSize:1.5*parseInt(e.get("titleFontSize")),subtitleFontSize:parseInt(e.get("titleFontSize")),paypalQuantity:e.get("paypalBeforeQuantity"),paypalButtonText:e.get("paypalBeforeButtonText"),paypalPaypalAccount:e.get("paypalBeforePaypalAccount"),paypalCurrencyCode:e.get("paypalBeforeCurrencyCode"),paypalPurchaseType:e.get("paypalBeforePurchaseType"),paypalSuccessUrl:e.get("paypalBeforeSuccessUrl"),paypalItemName:e.get("paypalBeforeItemName"),paypalItemCost:e.get("paypalBeforeItemCost"),paypalAllowUserToSpecifyPrice:e.get("paypalBeforeAllowUserToSpecifyPrice"),paypalAllowUserToSpecifyQuantity:e.get("paypalBeforeAllowUserToSpecifyQuantity"),paypalTrialOn:e.get("paypalBeforeTrialOn"),paypalTrialPrice:e.get("paypalBeforeTrialPrice"),paypalTrialDuration:e.get("paypalBeforeTrialDuration"),paypalTrialDurationUnits:e.get("paypalBeforeTrialDurationUnits"),paypalSubscriptionPrice:e.get("paypalBeforeSubscriptionPrice"),paypalSubscriptionDuration:e.get("paypalBeforeSubscriptionDuration"),paypalSubscriptionDurationUnits:e.get("paypalBeforeSubscriptionDurationUnits"),paypalShippingCost:e.get("paypalBeforeShippingCost"),paypalNoShipping:e.get("paypalBeforeNoShipping"),textFontColor:e.get("titleFontColor"),textFontFamily:e.get("titleFontFamily"),backgroundColor:e.get("beforeBackgroundColor")};e.setLocals({dataBefore:a}),e.setLocals({dataAfter:n})},afterRender:function(){{var e=this;this.$el,this.model}"repeat"==e.model.get("afterCompletion")&&e.calculateNextEndDate(),"banner"==e.model.get("beforeCompletion")&&e.$el.find(".beforeCompletion").show(),e.model.get("locals").previewing?this.afterFinished():this.animateCountdownTimer()},afterFinished:function(){var e=this;"undefined"!=typeof COUNTDOWN_INTERVAL&&clearInterval(COUNTDOWN_INTERVAL),e.$el.find(".beforeCompletion").hide(),e.$el.find(".uncompleted").removeClass("uncompleted"),"free"!=e.model.meta.premium_status&&("banner"==e.model.get("afterCompletion")?(e.$el.find(".counterTable, .titleTextWrapper").hide(),e.$el.find(".afterCompletion").show()):"repeat"==e.model.get("afterCompletion")&&("timePerVisitor"==e.model.get("targetType")&&setCookie("powr_countdown_"+e.model.meta.id,0,-999,!0),e.calculateNextEndDate()&&e.animateCountdownTimer()))},calculateNextEndDate:function(){var e=this,t=new Date(e.model.get("targetDate")),n=e.model.get("countDirection")||"down",a=e.model.get("repeatUnit"),i=parseInt(e.model.get("repeatQuantity")),o="date"!=e.model.get("targetType"),r=(parseInt(e.model.get("targetNumber"))||0)*e.model.intervalInMs(),s=function(e){if(o)e*=r,t=new Date(t.getTime()+e);else switch(e*=i,a){case"D":t.setDate(t.getDate()+e);break;case"W":t.setDate(t.getDate()+7*e);break;case"M":for(var n=t.getFullYear(),s=t.getMonth()+e;s>11;)s-=11,n++;var l=t.getDate(),u={0:31,1:n%4==0?29:28,2:31,3:30,4:31,5:30,6:31,7:31,8:30,9:31,10:30,11:31};l>u[s]&&(l=u[s]);var c=t.getHours(),d=t.getMinutes(),p=t.getSeconds(),m=t.getMilliseconds();t=new Date(n,s,l,c,d,p,m);break;case"Y":t.setYear(t.getFullYear()+e)}},l=0,u=1e5;if("down"==n){for(;t.valueOf()<=(new Date).valueOf();)if(s(1),l++,l>u)return debug()("Too many iterations!"),!1}else for(;t.valueOf()>=(new Date).valueOf();)if(s(-1),l++,l>u)return debug()("Too many iterations!"),!1;return debug()(t.toISOString()),e.model.setLocals({endDate:t.toISOString().replace(/\.\d{3}Z^/,"")}),!0},afterFitText:function(){var e=this;this.$el.find(".counterElement").removeAttr("style"),this.$el.find(".timeLabel").removeAttr("style"),this.$el.find(".separator").removeAttr("style");var t=e.$el.find(".counterRow .counterElement:visible"),n=t.last().width(),a=e.$el.find(".counterRow .separator:visible"),i=a.last().width();debug()("sepWidth is "+i+"; counterWidth is "+n);var o=e.$el.width();if((/iPhone|iPod|iPad/.test(navigator.userAgent)||navigator.userAgent.indexOf("Safari")>-1)&&-1==navigator.userAgent.indexOf("Chrome")&&-1==navigator.userAgent.indexOf("Android"))var r=!0;else var r=!1;r&&(e.$el.find(".countdownTimer").hide(),o=e.$el.width(),e.$el.find(".countdownTimer").show()),debug()("Target width is "+o);var s=i*a.length+n*t.length;debug()("Current width is "+s);var l=e.$el.find(".counterRow").width()-s;if(r){var u=parseInt(e.model.get("elementSpacing")),c=parseInt(e.model.get("backgroundBorderWidth"));l=u*(e.$el.find(".counterRow td:visible").length+1)+2*c*t.length}else debug()("Host is not safari");debug()("Correction factor: "+l);var d=(o-l)/(.5*a.length+t.length);d=Math.min(d,parseInt(e.model.get("elementSize")));var p=Math.round(.8*d);this.$el.find(".counterElement").css({width:d+"px",height:d+"px",fontSize:p+"px"}),this.$el.find(".separator").css({fontSize:Math.round(.6*p)+"px"});var m=l+d/2*a.length+d*t.length,f=e.$el.find(".timeLabel:visible").text().trim().split(/\s+/).join(" "),h=computeMaxFontSize(f,m,"Open Sans");h=Math.min(h,parseInt(e.model.get("elementSize"))/2),this.$el.find(".timeLabel").each(function(){$(this).css("fontSize",h+"px")});var g=this.$el.find(".timeLabelWrapper").height();this.$el.css("marginBottom",g+"px")},convertSecondsToTimeString:function(e){var t=convertSecondsToComponents(e);debug()("Time obj: ",t);var n=3-t.days.toString().length,a=Array(n+1).join("0")+t.days,i=2-t.hours.toString().length,o=Array(i+1).join("0")+t.hours,r=2-t.minutes.toString().length,s=Array(r+1).join("0")+t.minutes,l=2-t.seconds.toString().length,u=Array(l+1).join("0")+t.seconds;return a+o+s+u},convertNumberToTimeString:function(e){var t=(this.model.get("locals").digits||9)-e.toString().length;return Array(t+1).join("0")+e.toString()},animateCountdownTimer:function(){function e(n,a,o){if(0==n.find(".currentNumber .value").filter(function(){return 0!=$(this).html()}).length&&("up"!=t.model.get("countDirection")||"number"!=t.model.get("targetType")))return void t.afterFinished();var r=$(t.$el.find(".counterElement")[a]),s=r.find(".currentNumberWrapper"),l=r.find(".nextNumberWrapper"),u="swing",d=parseInt(s.find(".value").html()),p=r.parents("td").data("max");if("down"==i){if(0==a&&0>d-1)return void t.afterFinished();if(0>d-1){var m=p;e(n,a-1,o)}else var m=d-1}else{if(0==a&&d+1>=p)return void t.afterFinished();if(d+1>p){var m=0;e(n,a-1,o)}else var m=d+1}switch(o){case"slideDown":l.find(".value").html(m),s.animate({top:"-100%"},c,u),l.animate({top:"-100%"},c,u,function(){s.find(".value").html(m),r.find(".currentNumberWrapper, .nextNumberWrapper").css({top:0})});break;case"countDown":s.animate({opacity:.5},c),setTimeout(function(){s.find(".value").html(m),s.animate({opacity:1},c)},c);break;case"flipBottom":var f=s.closest(".counterElement");l.find(".value").html(m),f.addClass("flipBottom"),setTimeout(function(){f.find(".value").html(m),f.removeClass("flipBottom")},600);break;case"scaleUp":var f=s.closest(".counterElement");l.find(".value").html(m),f.addClass("scaleUp"),setTimeout(function(){f.find(".value").html(m),f.removeClass("scaleUp")},600);break;case"popup":var f=s.closest(".counterElement");l.find(".value").html(m),f.addClass("popup"),setTimeout(function(){f.find(".value").html(m),f.removeClass("popup")},600)}}var t=this,n=this.model,a=this.model.intervalInMs(),i=t.model.get("countDirection")||"down",o=t.model.secondsRemaining();if(0==o&&("up"!=i||"number"!=t.model.get("targetType")))return t.afterFinished();var r="number"==n.get("targetType")?this.convertNumberToTimeString(o):this.convertSecondsToTimeString(o);debug()("Seconds remaining: "+o+";timestring: "+r);for(var s=r.split(""),l=0;l<s.length;l++){var u=$(t.$el.find(".counterElement")[l]);u.find(".currentNumber .value").html(s[l])}"date"==n.get("targetType")&&("0"==s[0]&&"0"==s[1]&&"0"==s[2]?(this.$el.find(".showDays").toggleClass("hid",!0),this.$el.find(".timeLabels .showDays").siblings().first().hide()):"0"==s[0]&&"0"==s[1]?(this.$el.find(".showDays").slice(0,2).hide(),this.$el.find(".timeLabels .showDays").attr("colspan",1)):"0"==s[0]&&(this.$el.find(".showDays").slice(0,1).hide(),this.$el.find(".timeLabels .showDays").attr("colspan",2)));var c=Math.min(parseInt(n.get("animationSpeed")),a-20);0>c&&(c=0),"undefined"!=typeof COUNTDOWN_INTERVAL&&clearInterval(COUNTDOWN_INTERVAL),COUNTDOWN_INTERVAL=setInterval(function(){e(t.$el,s.length-1,n.get("countdownAnimation"))},a)}})}),$(function(){if($("#apps-view, #apps-facebook_view").length>0&&(loadView(),loadViewListeners()),$("#apps-cached_view").length>0)if(debug()("In apps cached view"),loadViewListeners(),"async"==getURLParameter("load"))debug()("Async loading"),LOAD_ME_INTERVAL=setInterval(function(){if("undefined"==typeof META||void 0==META){if("undefined"!=typeof PARENT_ORIGIN&&"undefined"!=typeof IFRAME_INDEX){var e={message:"loadMe",data:{iframe_index:IFRAME_INDEX}};parent.postMessage(JSON.stringify(e),PARENT_ORIGIN)}}else clearInterval(LOAD_ME_INTERVAL)},5e3);else{var e="/plugins/"+APP_DETAILS.slug+"/view.json?";e+=getURLParameter("id")?"id="+getURLParameter("id"):getURLParameter("unique_label")?"unique_label="+getURLParameter("unique_label")+"&powr_token="+getURLParameter("powr_token")+"&user_label="+getURLParameter("user_label"):"powr_token="+getURLParameter("powr_token")+"&user_label="+getURLParameter("user_label"),getURLParameter("external_type")&&(e+="&external_type="+getURLParameter("external_type")),debug()("Calling to get app json. Url is "+e),ajaxController({url:e,type:"GET"},function(e){e.success?(debug()("Success getting view data"),META=e.meta,GLOBALS=e.globals,CONTENT=e.content,loadView()):debug()("Error getting view data")})}if($("#apps-wix_view").length>0&&initializeWix(),$("#apps-wix_cached_view").length>0){var e="/plugins/"+APP_DETAILS.slug+"/wix_view.json?"+originalQuery();ajaxController({url:e,type:"GET"},function(e){e.success?(META=e.meta,GLOBALS=e.globals,VIEW_MODE=Wix.Utils.getViewMode(),"site"!=VIEW_MODE?BACKUP_CONTENT=e.content:CONTENT=e.content,initializeWix()):debug()("Error getting wix view data")})}}),POWrDropDown.prototype={ModuleName:"POWrDropDown",disable:function(){this.enabled=!1,this.$pickerInput.attr("disabled","disabled")},_exec_handler:function(e){var t=this;return function(n){t.enabled&&(t._handlers[e](n,this,t),t.trigger("change"))}},val:function(e){return e?this.$pickerInput.val(e):this.$pickerInput.val()},initializerPicker:function(){var e=this,t=this.$pickerInput,n=this.items;t.autocomplete({source:n,minLength:0,select:function(n,a){var i=a.item.value;e.selectedValue=i,t.val(a.item.label),e.trigger("change"),n.preventDefault()}}),t.focus(function(){$(e.$body).autocomplete("search","")}),t.on("click",function(){$(e.$body).autocomplete("search","")}),t.val(n[0].label)},_html:function(){return['<input type="text" class="form-control ignore user-success" pwr pwr-mod-attr="pickerInput">'].join("\n")}()},POWrDatePickerComponent.prototype={ModuleName:"POWrDatePickerComponent",handleNativeInputs:function(){var e=$(this).find('[type="date"]'),t=$(this).find('[pwr-mod-attr="dateTimeHidden"]');e.on("change",function(e){var n=$(e.target).val(),a=n.split("-"),i=a[0],o=a[1]-1,r=a[2];this.dateState.year(i),this.dateState.month(o),this.dateState.date(r),t.val((o+1).toString()+"/"+r+"/"+i)}.bind(this))},setDateState:function(e){this.dateState=e?moment_custom(e):moment_custom(),this.setDateInput()},setFormat:function(e){if(!e)throw"You messed up here";this.formatString=e,this.setDateInput();var t="MM-DD-YYYY"===this.formatString?"mm-dd-yy":"dd-mm-yy";this.$datePickerContainer.datepicker("option","dateFormat",t),this.setDateInput()},setDateInput:function(){this.dateState||this.setDateState();var e=this.dateState.format(this.formatString,this.use_local);this.$datePickerContainer.datepicker("option","dateFormat","MM-DD-YYYY"===this.formatString?"mm-dd-yy":"dd-mm-yy"),this.$datePickerContainer.datepicker("setDate",e)},_setYear:function(e){this.dateState.year(e)},_setMonth:function(e){this.dateState.month(e)},_setDay:function(e){this.dateState.date(e)},_changeDate:function(e){var t=moment_custom(e),n={year:t.get("year"),month:t.get("month"),date:t.get("date"),hour:t.get("hour"),minute:t.get("minute"),second:t.get("second"),millisecond:t.get("millisecond")};this.dateState=moment_custom(n),this.setDateInput()},_handlers:{jqueryCalChange:function(e,t,n){var a=n.$datePickerContainer.datepicker("getDate");n._setMonth(a.getUTCMonth()),n._setDay(a.getUTCDate()),n.setDateState(a),n.trigger("change")}},_html:function(){return['<input type="text" class="form-control ignore user-success" pwr pwr-mod-attr="datePickerContainer">'].join("\n")}()},POWrTimePickerComponent.prototype={ModuleName:"POWrTimePickerComponent",handleNativeInputs:function(){var e=this.$body.findAndSelf('[type="time"]');e.on("change",function(e){var t=$(e.target).val(),n=t.split(":"),a=n[0],i=n[1];this.timeState.hour(a,this.use_local),this.timeState.minute(i,this.use_local),this.trigger("change")}.bind(this)),this.timeState=moment_custom()},disable:function(){this.$minuteInput.attr("disabled","disabled"),this.$hourInput.attr("disabled","disabled"),this.$amPmInput.attr("disabled","disabled")},enable:function(){this.$minuteInput.removeAttr("disabled"),this.$hourInput.removeAttr("disabled"),this.$amPmInput.removeAttr("disabled")},setTimeState:function(e){return this.timeState=moment_custom(e||moment_custom()),this._setInputs(),this},_setInputs:function(){this._setHourInput(),this._setMinuteInput(),this._setAMPMInput()},_setHourInput:function(){var e=this.timeState.hours(null,this.use_local),t=this.is_twentyfour();if(e>12)var e=t?e:e-12;0!==e||t||(e=12),this.$hourInput.val(this.pad2(e))},_setMinuteInput:function(){var e=this.timeState.minutes(null,this.use_local);this.$minuteInput.val(this.pad2(e))},_setAMPMInput:function(){var e=this.timeState.format("A",this.use_local);this.$amPmInput.val(this.pad2(e))},_alternateAMPM:function(){var e=this.timeState.format("A",this.use_local),t="PM"===e?-12:12;this.timeState.add(t,"hours"),this._setAMPMInput()},_incrementHour:function(){var e=this.timeState.hours(null,this.use_local),t=this.is_twentyfour();e===(t?23:12)?this.timeState.hours(1,this.use_local):this.timeState.hours(e+1,this.use_local),this._setHourInput(),this.trigger("change")},_decrementHour:function(){var e=this.timeState.hours(null,this.use_local);0===e?this.timeState.hours(23,this.use_local):this.timeState.hours(e+-1,this.use_local),this._setHourInput(),this.trigger("change")},_incrementMinute:function(){var e=this.timeState.minutes(null,this.use_local);this.timeState.minutes(59===e?0:e+1),this._setMinuteInput(),this.trigger("change")},_decrementMinute:function(){var e=this.timeState.minutes(null,this.use_local);0===e?this.timeState.minutes(59,this.use_local):this.timeState.minutes(this.timeState.minutes(null,this.use_local)+-1,this.use_local),this._setMinuteInput(),this.trigger("change")},hourInputValidate:function(e){var t=parseInt(e);if(isNaN(t))return e;var n;return numberRegex.test(t)?t>12&&(n=12):n=1,n},minuteInputValidate:function(e){var t=parseInt(e);if(isNaN(t))return e;var n;return n=numberRegex.test(t)?t>59?59:this.pad2(t):"00"},amPmInputValidate:function(e){var t=e.toUpperCase();return"PM"!=t&&"AM"!=t&&(t="PM"),t},keydownMinuteInput:function(e){return 38==e.keyCode?(this._incrementMinute(),!0):40==e.keyCode?(this._decrementMinute(),!0):void 0},keydownHourInput:function(e){return 38==e.keyCode?(this._incrementHour(),!0):40==e.keyCode?(this._decrementHour(),!0):void 0},keydownAmPmInput:function(e){return 38==e.keyCode||40==e.keyCode?(this._alternateAMPM(),!0):void 0},_exec_handler:function(e){var t=this;return function(n){t._handlers[e](n,this,t),t.trigger("change")}},_handlers:{hourInputKeyBlur:function(e,t,n){if(!n.keydownHourInput(e)){{var a=parseInt($(t).val());!isNaN(a)}isNaN(parseInt(a))||n.timeState.hour(a,n.use_local),n._setInputs()}},minuteInputKeyBlur:function(e,t,n){if(!n.keydownMinuteInput(e)){var a=$(t),i=parseInt(a.val()),o=!isNaN(i),r=60>=i;o&&r&&n.timeState.minute(i,n.use_local),n._setInputs()}},amPmInputKeyBlur:function(e,t,n){if(!n.keydownAmPmInput(e)){var a=$(t),i=n.amPmInputValidate(a.val()),o=n.timeState.format("A");if(i!==o){var r="PM"===o?-12:12;n.timeState.add(r,"hours"),n._setInputs()}}},incrementHourClick:function(e,t,n){n._incrementHour()
},decrementHourClick:function(e,t,n){n._decrementHour()},incrementMinuteClick:function(e,t,n){n._incrementMinute()},decrementMinuteClick:function(e,t,n){n._decrementMinute()},ampPmToggleClick:function(e,t,n){n._alternateAMPM()}},_initializers:{$timeSelectorEl:function(e){var t=e.$timeSelectorEl,n=new Date,a=n.getHours()+":"+n.getMinutes(),i=[{label:"0:00 (12 am)",value:0},{label:"1:00 (1 am)",value:1},{label:"2:00 (2 am)",value:2},{label:"3:00 (3 am)",value:3},{label:"4:00 (4 am)",value:4},{label:"5:00 (5 am)",value:5},{label:"6:00 (6 am)",value:6},{label:"7:00 (7 am)",value:7},{label:"8:00 (8 am)",value:8},{label:"9:00 (9 am)",value:9},{label:"10:00 (10 am)",value:10},{label:"11:00 (11 am)",value:11},{label:"12:00 (12 pm)",value:12},{label:"13:00 (1 pm)",value:13},{label:"14:00 (2 pm)",value:14},{label:"15:00 (3 pm)",value:15},{label:"16:00 (4 pm)",value:16},{label:"17:00 (5 pm)",value:17},{label:"18:00 (6 pm)",value:18},{label:"19:00 (7 pm)",value:19},{label:"20:00 (8 pm)",value:20},{label:"21:00 (9 pm)",value:21},{label:"22:00 (10 pm)",value:22},{label:"23:00 (11 pm)",value:23},{label:"24:00 (12 pm)",value:24}];t.autocomplete({appendTo:self.$el,source:i,minLength:0,change:function(){e.__updateDatetime()}}),t.focus(function(){$(this).autocomplete("search","")}),t.on("click",function(){$(this).autocomplete("search","")}),t.val(a)}},is_twentyfour:function(){return!!this.$amPmInput.attr("data-istwentyfour")},execInitializer:function(e,t){this._initializers[e](t)},pad2:function(e){return e.length>1&&10>e?e:(10>e?"0":"")+e},_html:function(){return['<div class="timePicker" pwr pwr-mod-attr="timepickers">','<div class="hourPicker">','<div class="upHour timeArrow" unselectable="on" pwr pwr-mod-attr="incrementHour" pwr-handler="incrementHourClick"><i class="fa fa-caret-up"></i></div>','<input type="text" class="hour ignoreThis" value="1" pwr pwr-mod-attr="hourInput" pwr-handler-event="blur" pwr-handler="hourInputKeyBlur">','<div class="downHour timeArrow" unselectable="on" pwr pwr-mod-attr="decrementHour" pwr-handler="decrementHourClick"><i class="fa fa-caret-down"></i></div>',"</div>",'<div class="colon">:</div>','<div class="minutePicker">','<div class="upMinute timeArrow" unselectable="on" pwr pwr-mod-attr="incrementMinute" pwr-handler="incrementMinuteClick"><i class="fa fa-caret-up"></i></div>','<input type="text" class="minute ignoreThis" value="00" pwr pwr-mod-attr="minuteInput" pwr-handler-event="blur" pwr-handler="minuteInputKeyBlur">','<div class="downMinute timeArrow" unselectable="on" pwr pwr-mod-attr="decrementMinute" pwr-handler="decrementMinuteClick"><i class="fa fa-caret-down"></i></div>',"</div>",'<div class="ampmPicker" pwr pwr-mod-attr="ampmPickerContainer">','<div class="upAmpm timeArrow" unselectable="on" pwr pwr-mod-attr="ampmToggle" pwr-handler="ampPmToggleClick"><i class="fa fa-caret-up"></i></div>','<input type="text" class="ampm ignoreThis" pwr pwr-mod-attr="amPmInput" pwr-handler-event="blur" pwr-handler="amPmInputKeyBlur">','<div class="downAmpm timeArrow" unselectable="on" pwr pwr-mod-attr="ampmToggle" pwr-handler="ampPmToggleClick"><i class="fa fa-caret-down"></i></div>',"</div>","</div>"].join("\n")}()},POWrTimeDropDown.prototype={ModuleName:"POWrTimeDropDown",disable:function(){this.enabled=!1,this.$timepicker.attr("disabled","disabled")},enable:function(){this.enabled=!0,this.$timepicker.removeAttr("disabled")},setTimeState:function(e){this.timeState=this.timeState(e);var t=this.timeState.format("h:mm (a)",this.use_local);return this.$timepicker.val(t),this},getTimeState:function(){var e=this.timeState,t=this.timeState.format("A",this.use_local),n=this.timeState.hours(),a=this.timeState.minutes(),i=this.timeState.seconds(),o=this.is_twentyfour();return{isTwentFour:o,_moment:e,ampm:t,hour:n,minute:a,second:i}},_getHours:function(){var e=this.timeState.hours(),t=this.is_twentyfour();if(e>12)var e=t?e:e-12;return this.pad2(e)},_alternateAMPM:function(){var e=this.timeState.format("A"),t="PM"===e?-12:12;this.timeState.add(t,"hours"),this._setAMPMInput()},hourInputValidate:function(e){var t,n=/^[+-]?\d+(\.\d+)?([eE][+-]?\d+)?$/,a=parseInt(e);return n.test(a)?a>12&&(t=12):t=1,t},minuteInputValidate:function(e){var t,n=/^[+-]?\d+(\.\d+)?([eE][+-]?\d+)?$/,a=parseInt(e);return t=n.test(a)?a>59?59:this.pad2(a):"00"},amPmInputValidate:function(e){var t=e.toUpperCase();return"PM"!=t&&"AM"!=t&&(t="PM"),t},_exec_handler:function(e){var t=this;return function(n){t.enabled&&(t._handlers[e](n,this,t),t.trigger("change"))}},_handlers:{hourInputKeyBlur:function(e,t,n){if(!n.keydownHourInput(e)){var a=$(t),i=n.hourInputValidate(a.val());n.timeState.hour(i),n._setHourInput()}},minuteInputKeyBlur:function(e,t,n){if(!n.keydownMinuteInput(e)){var a=$(t),i=n.minuteInputValidate(a.val());n.timeState.minute(i),n._setMinuteInput()}},amPmInputKeyBlur:function(e,t,n){if(!n.keydownAmPmInput(e)){var a=$(t),i=n.amPmInputValidate(a.val()),o=n.timeState.format("A");if(debug()("Val is "+i+"; curAMPM is "+o),i!==o){var r="PM"===o?-12:12;n.timeState.add(r,"hours"),n._setAMPMInput()}}},ampPmToggleClick:function(e,t,n){debug()("In ampPmToggleClick"),n._alternateAMPM()}},setTimeDropDown:function(){},_initializers:{$timepicker:function(e){var t,n=e.$timepicker,a=[{label:"0:00 (12 am)",value:0},{label:"1:00 (1 am)",value:1},{label:"2:00 (2 am)",value:2},{label:"3:00 (3 am)",value:3},{label:"4:00 (4 am)",value:4},{label:"5:00 (5 am)",value:5},{label:"6:00 (6 am)",value:6},{label:"7:00 (7 am)",value:7},{label:"8:00 (8 am)",value:8},{label:"9:00 (9 am)",value:9},{label:"10:00 (10 am)",value:10},{label:"11:00 (11 am)",value:11},{label:"12:00 (12 pm)",value:12},{label:"13:00 (1 pm)",value:13},{label:"14:00 (2 pm)",value:14},{label:"15:00 (3 pm)",value:15},{label:"16:00 (4 pm)",value:16},{label:"17:00 (5 pm)",value:17},{label:"18:00 (6 pm)",value:18},{label:"19:00 (7 pm)",value:19},{label:"20:00 (8 pm)",value:20},{label:"21:00 (9 pm)",value:21},{label:"22:00 (10 pm)",value:22},{label:"23:00 (11 pm)",value:23},{label:"24:00 (12 pm)",value:24}];n.autocomplete({source:a,minLength:0,select:function(t,n){t.preventDefault();var a=n.item.value;e.timeState.hours(a,e.use_local),e.timeState.minutes(0,e.use_local);var i=e.timeState.format("h:mm (a)",e.use_local);t.target.value=i,e.trigger("change")},response:function(e,n){t=n.content}}),n.on("blur",function(t){var n=$(this),a=n.val(),i=e.timeObjectFromString(a);if(null===i)throw"Bad stuff dude";e.timeState.hour(i.hour,e.use_local),e.timeState.minute(i.minute,e.use_local);var o=e.timeState.format("h:mm (a)",e.use_local);t.target.value=o,e.trigger("change")}),n.focus(function(){$(this).autocomplete("search","")}),n.on("click",function(){$(this).autocomplete("search","")}),n.on("keydown",function(t){var n=$(this),a=n.val(),i=t.keyCode,o=13===i,r=i>=48&&90>=i;if(r&&n.autocomplete("search",a),o){var s=e.timeObjectFromString(a);if(null===s)throw"Bad stuff dude";e.timeState.hour(s.hour,e.use_local),e.timeState.minute(s.minute,e.use_local);var l=e.timeState.format("h:mm (a)",e.use_local);t.target.value=l,e.trigger("change")}});var i=e.timeState.format("h:mm (a)");n.val(i)}},is_twentyfour:function(){return APP_MODEL.attributes.isTwentyFour},execInitializer:function(e,t){this._initializers[e](t)},pad2:function(e){return e.length>1&&10>e?e:(10>e?"0":"")+e},timeObjectFromString:function(e){var t=!1,n=/^\s*(10|11|12|[1-9]:)|([0-5]?[0-9])|(am|pm)\s*/gi,a=e.match(n),i=a[0],o=a[1],r=a[2];if(!i&&!o)return"Bad input string";i&&!o&&(o="0"),("am"===o.toLowerCase()||"pm"===o.toLowerCase())&&(t="pm"===o.toLowerCase(),r=o.toLowerCase(),o="0"),r&&"string"==typeof r&&"pm"===r.toLowerCase()&&(t=!0);var s=t&&12!==parseInt(i)?parseInt(i)+12:parseInt(i);12!==parseInt(i)||t||(s=0);var l=parseInt(o);return{hour:s||0,minute:l||0}},_html:function(){return['<div class="powrTimeDDAdjust">','<input type="text" class="form-control ignore user-success" pwr pwr-mod-attr="timepicker" pwr-handler-event="blur">',"</div>"].join("\n")}()},POWrDateTimeComponent.prototype={ModuleName:"POWrDateTimeComponent",_init:function(){this._setDateInput(),this._setTimeComponent()},setDateTimeState:function(e){this.dateTimeState=moment_custom(e),this._init()},_setDateInput:function(){this.dateComponent.setDateState(this.dateTimeState)},_setTimeComponent:function(){this.timeComponent.setTimeState(this.dateTimeState)},_setHiddenInput:function(){var e=this.use_local?this.dateTimeState.toLocaleISOString():this.dateTimeState.toISOString();this.$dateTimeHidden.attr("value",e),this.$dateTimeHidden.val(e),this.$dateTimeHidden.trigger("change")},setFormat:function(e){this.formatString=e||this.formatString,this.$dateTimeFormatHidden.attr("value",e),this.$dateTimeFormatHidden.val(e),this.$dateTimeFormattedHidden.attr("value",this.dateTimeState.format(e)),this.$dateTimeFormattedHidden.val(e),this._setHiddenInput(),this.dateComponent.setFormat(this.formatString),this.trigger("change"),this.$dateTimeFormatHidden.trigger("change")},_html:function(){return["<div>",'<div pwr pwr-mod-attr="datePickerContainer" type="text">',"</div>",'<div pwr pwr-mod-attr="timePickerContainer" type="text">',"</div>",'<div pwr pwr-mod-attr="formatPickerContainer" type="text">',"</div>",'<input pwr pwr-mod-attr="dateTimeHidden" style="display:none;" type="text">','<input pwr pwr-mod-attr="dateTimeFormatHidden" style="display:none;" type="text">','<input pwr pwr-mod-attr="dateTimeFormattedHidden" style="display:none;" type="text">',"</div>"].join("\n")}()};
//# sourceMappingURL=/assets/maps/apps/countdownTimer-65683c2a5a4bfd906b2de46005cf05ff07aade79bf8edcb465a3be29f0188ca3.js.map
